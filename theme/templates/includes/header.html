<header>
    <nav class="navbar rounded-box shadow px-6">
      <div class="w-full md:flex md:items-center md:gap-2 container mx-auto">
        <div class="flex items-center justify-between">
            <div class="navbar-start items-center justify-between max-md:w-full">
                <a class="link text-base-content link-neutral text-2xl font-semibold no-underline flex items-center whitespace-nowrap" href="/">
                    <img src="/static/img/logo.svg" alt="Р" class="h-14 mr-1 inline-block align-middle">усская душа
                </a>

                <div class="md:hidden">
                  <button type="button" class="collapse-toggle btn btn-outline btn-secondary btn-sm btn-square" data-collapse="#default-navbar-collapse" aria-controls="default-navbar-collapse" aria-label="Toggle navigation">
                    <span class="icon-[tabler--menu-2] collapse-open:hidden size-4"></span>
                    <span class="icon-[tabler--x] collapse-open:block hidden size-4"></span>
                  </button>
                </div>
              </div>
        </div>
  
        <div id="default-navbar-collapse" class="md:navbar-end collapse hidden grow basis-full overflow-hidden transition-[height] duration-300 max-md:w-full">
          <ul class="menu md:menu-horizontal gap-2 p-0 text-base max-md:mt-2 flex items-center">
            <li class="flex items-center"><a href="/" class="flex items-center px-4">Модели</a></li>
            <li class="flex items-center"><a href="/about/" class="flex items-center px-4">О компании</a></li>
            <li class="flex items-center"><a href="/service/" class="flex items-center px-4">Услуги</a></li>
            <li class="flex items-center"><a href="/service-center/" class="flex items-center px-4">Сервис</a></li>
            
            {% if user.is_authenticated %}
            <!-- Для авторизованных пользователей показываем аватар с выпадающим меню -->
            <li class="flex items-center ml-2">
              <div class="dropdown relative inline-flex [--auto-close:inside] [--offset:8] [--placement:bottom-end]">
                <button id="dropdown-scrollable" type="button" class="dropdown-toggle flex items-center" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
                  <div class="avatar">
                    <div class="size-9.5 rounded-full">
                      {% if user.profile.avatar %}
                      <img src="{{ user.profile.avatar.url }}" alt="{{ user.username }}" />
                      {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 1 0-18 0"/><path d="M9 10a3 3 0 1 0 6 0a3 3 0 1 0-6 0m-2.832 8.849A4 4 0 0 1 10 16h4a4 4 0 0 1 3.834 2.855"/></g></svg>
                      {% endif %}
                    </div>
                  </div>
                </button>
                <ul class="dropdown-menu dropdown-open:opacity-100 hidden min-w-60" role="menu" aria-orientation="vertical" aria-labelledby="dropdown-avatar">
                  <li class="dropdown-header gap-2">
                    <div class="avatar">
                      <div class="w-10 rounded-full">
                        {% if user.profile.avatar %}
                        <img src="{{ user.profile.avatar.url }}" alt="{{ user.username }}" />
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 1 0-18 0"/><path d="M9 10a3 3 0 1 0 6 0a3 3 0 1 0-6 0m-2.832 8.849A4 4 0 0 1 10 16h4a4 4 0 0 1 3.834 2.855"/></g></svg>
                        {% endif %}
                      </div>
                    </div>
                    <div>
                      <h6 class="text-base-content text-base font-semibold">{{ user.get_full_name|default:user.username }}</h6>
              
                    </div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="{% url 'accounts:profile' %}">
                      <span class="icon-[tabler--user]"></span>
                      Личный кабинет
                    </a>
                  </li>
                  <li class="dropdown-footer gap-2">
  <form method="post" action="{% url 'accounts:logout' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-error btn-soft btn-block">
      <span class="icon-[tabler--logout]"></span>
      Выйти
    </button>
  </form>
</li>
                </ul>
              </div>
            </li>
            {% else %}
            <!-- Для неавторизованных пользователей показываем кнопки регистрации и входа -->
            <li class="flex items-center ml-2">
                <a href="{% url 'accounts:auth' %}" class="btn btn-primary btn-sm">Зарегистрироваться</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
  </header>
  