{% extends 'base.html' %}

{% block title %}{{ car_model.brand.name }} {{ car_model.name }} - –ê–≤—Ç–æ—Å–∞–ª–æ–Ω "–†—É—Å—Å–∫–∞—è –¥—É—à–∞"{% endblock %}

{% block content %}

<div class="w-full max-w-[1280px] mx-auto px-4 py-8">

<div class="container mx-auto px-4 py-8 max-w-6xl">

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="mb-6">
    <h1 class="text-4xl font-bold text-gray-900" id="car-title">{{ car_model.brand.name }} {{ car_model.name }}</h1>
    <p class="text-gray-500 mt-1" id="car-subtitle">{% if available_cars %}–î–æ—Å—Ç—É–ø–Ω–æ —Å–µ–π—á–∞—Å{% else %}–ü–æ–¥ –∑–∞–∫–∞–∑{% endif %}</p>
</div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ -->
<div class="border-b border-gray-200 mb-8">
    <nav class="flex space-x-8">
      <button class="tab tab-lg tab-active" id="overview-tab" onclick="switchTab('overview')">–û–±–∑–æ—Ä</button>
      <button class="tab tab-lg" id="specs-tab" onclick="switchTab('specs')">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</button>
      <button class="tab tab-lg" id="photos-tab" onclick="switchTab('photos')">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</button>
    </nav>
</div>

<div id="overview-content" class="tab-content">
    <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10" id="image-gallery">
      <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ -->
      <div class="rounded-lg overflow-hidden">
        <img id="main-image" src="{% if car_model.image %}{{ car_model.image.url }}{% else %}https://placehold.co/600x400/blue/white?text={{ car_model.brand.name }}+{{ car_model.name }}{% endif %}" alt="{{ car_model.brand.name }} {{ car_model.name }}" class="w-full h-auto object-cover">
      </div>
    
      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
      <div class="rounded-lg overflow-hidden">
        <img id="gallery-image-1" src="https://placehold.co/600x400/black/yellow?text={{ car_model.brand.name }}+{{ car_model.name }}+Black" alt="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 1" class="w-full h-auto object-cover">
      </div>
    
      <div class="rounded-lg overflow-hidden">
        <img id="gallery-image-2" src="https://placehold.co/600x400/white/gray?text={{ car_model.brand.name }}+{{ car_model.name }}+White" alt="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 2" class="w-full h-auto object-cover">
      </div>
    
      <div class="rounded-lg overflow-hidden">
        <img id="gallery-image-3" src="https://placehold.co/600x400/silver/white?text={{ car_model.brand.name }}+{{ car_model.name }}+Silver" alt="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3" class="w-full h-auto object-cover">
      </div>
    
      <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ -->
      <div class="rounded-lg overflow-hidden col-span-2 md:col-span-1">
        <img id="gallery-image-4" src="https://placehold.co/600x400/gray/white?text={{ car_model.brand.name }}+{{ car_model.name }}+Interior" alt="–ò–Ω—Ç–µ—Ä—å–µ—Ä" class="w-full h-auto object-cover">
      </div>
    </div>

    <!-- –†–∞–∑–¥–µ–ª "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏" -->
    <div class="mb-10">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏</h2>
      <div class="flex flex-wrap gap-4 mb-6" id="equipment-buttons">
        {% for equipment in equipments %}
        <button 
          class="equipment-btn px-6 py-3 border rounded-md text-sm font-medium transition-colors duration-200 {% if forloop.first %}bg-blue-600 text-white border-blue-600{% else %}border-gray-300 hover:bg-gray-50 text-gray-700{% endif %}" 
          data-equipment-id="{{ equipment.id }}">
          {{ equipment.name }}
        </button>
        {% empty %}
        <button class="equipment-btn bg-blue-600 text-white px-6 py-3 border border-blue-600 rounded-md text-sm font-medium">
          {{ car_model.brand.name }} {{ car_model.name }} Classic
        </button>
        {% endfor %}
      </div>

      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ–±–∑–æ—Ä–∞ -->
      <div id="equipment-info" class="bg-gray-50 rounded-lg p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-xl font-bold mb-4" id="equipment-name">
              {% if equipments %}{{ equipments.0.name }}{% else %}–ë–∞–∑–æ–≤–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è{% endif %}
            </h3>
            <p class="text-gray-600 mb-4" id="equipment-description">
              {% if equipments %}{{ equipments.0.description }}{% else %}–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è —Å –±–∞–∑–æ–≤—ã–º –Ω–∞–±–æ—Ä–æ–º –æ–ø—Ü–∏–π{% endif %}
            </p>
            <div class="text-2xl font-bold text-blue-600 mb-4" id="equipment-price">
              {% if equipments %}{{ equipments.0.price|floatformat:0 }} ‚ÇΩ{% else %}{{ car_model.base_price|floatformat:0 }} ‚ÇΩ{% endif %}
            </div>
          
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º -->
            <button onclick="switchTab('specs')" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium transition-colors">
              <span class="icon-[tabler--list-details] size-5"></span>
              –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
            </button>
          </div>
        
          <div id="equipment-features">
            <!-- –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ -->
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫–∞–∑–∞ –∏ —Ç–µ–∫—Å—Ç -->
    <div class="mt-8">
      <a href="{% url 'service:service_center' %}">
        <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-4 px-6 rounded-md mb-4 transition duration-300">
          –ó–∞–∫–∞–∑–∞—Ç—å –æ–Ω–ª–∞–π–Ω
        </button>
      </a>
      <p class="text-gray-500 text-sm text-center">
        –ó–∞–∫–∞–∑–∞—Ç—å –æ–Ω–ª–∞–π–Ω –∏–ª–∏ –ø–æ—Å–µ—Ç–∏—Ç—å –Ω–∞—à —Å–∞–ª–æ–Ω –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
      </p>
    </div>
</div>

</div>

<div id="specs-content" class="tab-content hidden">
    <div class="bg-base-100 rounded-xl shadow-md p-8">
      <h2 class="text-2xl font-bold text-primary mb-6">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-x-12 gap-y-8">
      
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –î–≤–∏–≥–∞—Ç–µ–ª—å –∏ —Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è -->
        <div>
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <span class="icon-[tabler--engine] size-6 text-accent"></span>
            –î–≤–∏–≥–∞—Ç–µ–ª—å –∏ —Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è
          </h3>
          <table class="w-full">
            <tbody>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–¢–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                <td class="py-3 font-medium text-right">{{ car_model.get_fuel_type_display }}</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                <td class="py-3 font-medium text-right">{{ car_model.engine_volume }} –ª</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ú–æ—â–Ω–æ—Å—Ç—å</td>
                <td class="py-3 font-medium text-right" id="spec-power">{{ car_model.power }} –ª.—Å.</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ö—Ä—É—Ç—è—â–∏–π –º–æ–º–µ–Ω—Ç</td>
                <td class="py-3 font-medium text-right">170 –ù–º –ø—Ä–∏ 3700 –æ–±/–º–∏–Ω</td>
              </tr>
              <tr>
                <td class="py-3 text-base-content/70">–ö–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á</td>
                <td class="py-3 font-medium text-right">{{ car_model.get_transmission_display }}</td>
              </tr>
            </tbody>
          </table>

          <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
          <h3 class="text-xl font-bold mb-4 mt-8 flex items-center gap-2">
            <span class="icon-[tabler--speedboat] size-6 text-accent"></span>
            –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
          </h3>
          <table class="w-full">
            <tbody>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</td>
                <td class="py-3 font-medium text-right" id="spec-max-speed">{{ car_model.max_speed|default:"180" }} –∫–º/—á</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–†–∞–∑–≥–æ–Ω –¥–æ 100 –∫–º/—á</td>
                <td class="py-3 font-medium text-right" id="spec-acceleration">{{ car_model.acceleration|default:"11.2" }} —Å</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ (–≥–æ—Ä–æ–¥)</td>
                <td class="py-3 font-medium text-right" id="spec-fuel-city">{{ car_model.fuel_consumption_city|default:"9.2" }} –ª/100 –∫–º</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ (—Ç—Ä–∞—Å—Å–∞)</td>
                <td class="py-3 font-medium text-right" id="spec-fuel-highway">{{ car_model.fuel_consumption_highway|default:"5.9" }} –ª/100 –∫–º</td>
              </tr>
              <tr>
                <td class="py-3 text-base-content/70">–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ (—Å–º–µ—à–∞–Ω–Ω—ã–π)</td>
                <td class="py-3 font-medium text-right" id="spec-fuel-mixed">{{ car_model.fuel_consumption|default:"7.2" }} –ª/100 –∫–º</td>
              </tr>
            </tbody>
          </table>
        </div>
      
        <!-- –°—Ä–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞ - –†–∞–∑–º–µ—Ä—ã –∏ –±–∞–∑–æ–≤—ã–π –∫–æ–º—Ñ–æ—Ä—Ç -->
        <div>
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <span class="text-2xl">üìè</span>
            –†–∞–∑–º–µ—Ä—ã –∏ –º–∞—Å—Å–∞
          </h3>
          <table class="w-full">
            <tbody>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–î–ª–∏–Ω–∞</td>
                <td class="py-3 font-medium text-right">{{ car_model.length|default:"4410" }} –º–º</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–®–∏—Ä–∏–Ω–∞</td>
                <td class="py-3 font-medium text-right">{{ car_model.width|default:"1764" }} –º–º</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–í—ã—Å–æ—Ç–∞</td>
                <td class="py-3 font-medium text-right">{{ car_model.height|default:"1497" }} –º–º</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ö–æ–ª–µ—Å–Ω–∞—è –±–∞–∑–∞</td>
                <td class="py-3 font-medium text-right">{{ car_model.wheelbase|default:"2635" }} –º–º</td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–î–æ—Ä–æ–∂–Ω—ã–π –ø—Ä–æ—Å–≤–µ—Ç</td>
                <td class="py-3 font-medium text-right">{{ car_model.clearance|default:"178" }} –º–º</td>
              </tr>
              <tr>
                <td class="py-3 text-base-content/70">–û–±—ä–µ–º –±–∞–≥–∞–∂–Ω–∏–∫–∞</td>
                <td class="py-3 font-medium text-right">{{ car_model.trunk_volume|default:"480" }} –ª</td>
              </tr>
            </tbody>
          </table>

          <!-- –ë–∞–∑–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
          <h3 class="text-xl font-bold mb-4 mt-8 flex items-center gap-2">
            <span class="text-2xl">üõãÔ∏è</span>
            –ë–∞–∑–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
          </h3>
          <table class="w-full" id="base-equipment-table">
            <tbody>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å</td>
                <td class="py-3 font-medium text-right" id="spec-climate-control">
                  {% if equipments %}{{ equipments.0.has_climate_control|yesno:"–î–∞,–ù–µ—Ç" }}{% else %}–î–∞{% endif %}
                </td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</td>
                <td class="py-3 font-medium text-right" id="spec-multimedia">
                  {% if equipments %}{{ equipments.0.multimedia_system|default:"–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" }}{% else %}–ë–∞–∑–æ–≤–∞—è{% endif %}
                </td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ü–æ–¥–æ–≥—Ä–µ–≤ —Å–∏–¥–µ–Ω–∏–π</td>
                <td class="py-3 font-medium text-right" id="spec-seat-heating">
                  {% if equipments %}{{ equipments.0.seat_heating|default:"–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" }}{% else %}–ü–µ—Ä–µ–¥–Ω–∏–µ{% endif %}
                </td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ü–æ–¥–æ–≥—Ä–µ–≤ —Ä—É–ª—è</td>
                <td class="py-3 font-medium text-right" id="spec-heated-wheel">
                  {% if equipments %}{{ equipments.0.has_heated_steering_wheel|yesno:"–î–∞,–ù–µ—Ç" }}{% else %}–ù–µ—Ç{% endif %}
                </td>
              </tr>
              <tr class="border-b border-base-300">
                <td class="py-3 text-base-content/70">–ö–æ–∂–∞–Ω—ã–µ —Å–∏–¥–µ–Ω—å—è</td>
                <td class="py-3 font-medium text-right" id="spec-leather-seats">
                  {% if equipments %}{{ equipments.0.has_leather_seats|yesno:"–î–∞,–ù–µ—Ç" }}{% else %}–ù–µ—Ç{% endif %}
                </td>
              </tr>
              <tr>
                <td class="py-3 text-base-content/70">–†–∞–∑–º–µ—Ä –¥–∏—Å–∫–æ–≤</td>
                <td class="py-3 font-medium text-right" id="spec-wheel-size">
                  {% if equipments %}{{ equipments.0.wheel_size|default:"R15" }}{% else %}R15{% endif %}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
        <div>
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <span class="text-2xl">‚≠ê</span>
            –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
          </h3>
          <div id="spec-equipment-features">
            {% if equipments %}
              <div class="space-y-3">
                {% for feature in equipments.0.features.all %}
                  {% if feature.is_included %}
                    <div class="flex items-center gap-2">
                      <span class="text-green-500">‚úì</span>
                      <span class="text-sm">{{ feature.name }}</span>
                    </div>
                  {% endif %}
                {% empty %}
                  <div class="text-center py-8 text-gray-500">
                    <span class="text-4xl mb-4 block">üìã</span>
                    <p class="text-lg font-medium mb-2">–ë–∞–∑–æ–≤–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è</p>
                    <p class="text-sm">–í–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏</p>
                  </div>
                {% endfor %}
              </div>
            {% else %}
              <div class="text-center py-8 text-gray-500">
                <span class="text-4xl mb-4 block">üìã</span>
                <p class="text-lg font-medium mb-2">–ë–∞–∑–æ–≤–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è</p>
                <p class="text-sm">–í–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏</p>
              </div>
            {% endif %}
          </div>

          <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ -->
          <div class="mt-6 p-4 bg-gray-50 rounded-lg" id="additional-options">
            <h4 class="font-bold mb-3 flex items-center gap-2">
              <span class="text-lg">üîß</span>
              –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
            </h4>
            <div class="space-y-2 text-sm" id="additional-options-list">
              {% if equipments %}
                <div class="flex items-center justify-between">
                  <span>–õ—é–∫</span>
                  <span class="text-gray-500" id="spec-sunroof">{{ equipments.0.has_sunroof|yesno:"–î–∞,–ù–µ—Ç" }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ù–∞–≤–∏–≥–∞—Ü–∏—è</span>
                  <span class="text-gray-500" id="spec-navigation">{{ equipments.0.has_navigation|yesno:"–î–∞,–ù–µ—Ç" }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ü–∞—Ä–∫—Ç—Ä–æ–Ω–∏–∫–∏</span>
                  <span class="text-gray-500" id="spec-parking-sensors">{{ equipments.0.has_parking_sensors|yesno:"–î–∞,–ù–µ—Ç" }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ö–∞–º–µ—Ä–∞ –∑–∞–¥–Ω–µ–≥–æ –≤–∏–¥–∞</span>
                  <span class="text-gray-500" id="spec-rear-camera">{{ equipments.0.has_rear_camera|yesno:"–î–∞,–ù–µ—Ç" }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ö—Ä—É–∏–∑-–∫–æ–Ω—Ç—Ä–æ–ª—å</span>
                  <span class="text-gray-500" id="spec-cruise-control">{{ equipments.0.has_cruise_control|yesno:"–î–∞,–ù–µ—Ç" }}</span>
                </div>
              {% else %}
                <div class="flex items-center justify-between">
                  <span>–õ—é–∫</span>
                  <span class="text-gray-500">–ù–µ—Ç</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ù–∞–≤–∏–≥–∞—Ü–∏—è</span>
                  <span class="text-gray-500">–ù–µ—Ç</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>–ü–∞—Ä–∫—Ç—Ä–æ–Ω–∏–∫–∏</span>
                  <span class="text-gray-500">–ù–µ—Ç</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>

      </div>
    </div>
</div>

<div id="photos-content" class="tab-content hidden">
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏" -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="photos-gallery">
      <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ -->
      {% if car_model.image %}
      <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('{{ car_model.image.url }}', '{{ car_model }}')">
        <img src="{{ car_model.image.url }}" alt="{{ car_model }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
      </div>
      {% endif %}
    
      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ (–∑–∞–≥–ª—É—à–∫–∏) -->
      <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('https://placehold.co/800x600/black/yellow?text={{ car_model.brand.name }}+{{ car_model.name }}+Night', '{{ car_model }} - –Ω–æ—á–Ω–æ–π –≤–∏–¥')">
        <img src="https://placehold.co/800x600/black/yellow?text={{ car_model.brand.name }}+{{ car_model.name }}+Night" alt="{{ car_model }} - –Ω–æ—á–Ω–æ–π –≤–∏–¥" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
      </div>
    
      <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('https://placehold.co/800x600/white/gray?text={{ car_model.brand.name }}+{{ car_model.name }}+Day', '{{ car_model }} - –¥–Ω–µ–≤–Ω–æ–π –≤–∏–¥')">
        <img src="https://placehold.co/800x600/white/gray?text={{ car_model.brand.name }}+{{ car_model.name }}+Day" alt="{{ car_model }} - –¥–Ω–µ–≤–Ω–æ–π –≤–∏–¥" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
      </div>
    
      <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('https://placehold.co/800x600/silver/black?text={{ car_model.brand.name }}+{{ car_model.name }}+Side', '{{ car_model }} - –≤–∏–¥ —Å–±–æ–∫—É')">
        <img src="https://placehold.co/800x600/silver/black?text={{ car_model.brand.name }}+{{ car_model.name }}+Side" alt="{{ car_model }} - –≤–∏–¥ —Å–±–æ–∫—É" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
      </div>
    
      <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('https://placehold.co/800x600/gray/white?text={{ car_model.brand.name }}+{{ car_model.name }}+Interior', '{{ car_model }} - –∏–Ω—Ç–µ—Ä—å–µ—Ä')">
        <img src="https://placehold.co/800x600/gray/white?text={{ car_model.brand.name }}+{{ car_model.name }}+Interior" alt="{{ car_model }} - –∏–Ω—Ç–µ—Ä—å–µ—Ä" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
      </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
<div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden flex items-center justify-center p-4">
    <div class="relative max-w-4xl max-h-full">
      <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300 z-10">
        ‚úï
      </button>
      <img id="modalImage" src="" alt="" class="max-w-full max-h-full object-contain">
      <div class="absolute bottom-4 left-4 right-4 text-white text-center">
        <p id="modalImageTitle" class="text-lg font-medium"></p>
      </div>
    </div>
</div>

</div>
</div>

<!-- –ü–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π –≤ JavaScript -->
<script>
    // –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π –∏–∑ Django
    const equipmentsData = {{ equipments_json|safe }};
    const carModel = {
        brand: "{{ car_model.brand.name }}",
        name: "{{ car_model.name }}",
        basePower: {{ car_model.power }},
        baseMaxSpeed: {{ car_model.max_speed|default:"180" }},
        baseAcceleration: {{ car_model.acceleration|default:"11.2" }},
        baseFuelConsumption: {{ car_model.fuel_consumption|default:"7.5" }}
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
    function switchTab(tab) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.add('hidden');
        });
      
        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.tab').forEach(tabEl => {
            tabEl.classList.remove('tab-active');
        });
      
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É –∏ –¥–µ–ª–∞–µ–º –µ–µ –∞–∫—Ç–∏–≤–Ω–æ–π
        const contentElement = document.getElementById(tab + '-content');
        const tabElement = document.getElementById(tab + '-tab');
      
        if (contentElement) contentElement.classList.remove('hidden');
        if (tabElement) tabElement.classList.add('tab-active');
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    function openImageModal(imageSrc, title) {
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalImageTitle');
      
        if (modal && modalImage && modalTitle) {
            modalImage.src = imageSrc;
            modalTitle.textContent = title;
            modal.classList.remove('hidden');
        }
    }

    function closeImageModal() {
        const modal = document.getElementById('imageModal');
        if (modal) {
            modal.classList.add('hidden');
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–∞–ª–µ—Ä–µ–µ
    function updatePhotosGallery(equipment) {
        const gallery = document.getElementById('photos-gallery');
        if (!gallery) return;

        let imagesHtml = '';
      
        // –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        if (equipment.images && equipment.images.main) {
            imagesHtml += `
                <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('${equipment.images.main}', '${carModel.brand} ${carModel.name} ${equipment.name}')">
                    <img src="${equipment.images.main}" alt="${carModel.brand} ${carModel.name} ${equipment.name}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
                </div>
            `;
        }
      
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        if (equipment.images && equipment.images.gallery && equipment.images.gallery.length > 0) {
            equipment.images.gallery.forEach((imageSrc, index) => {
                const imageTypes = ['–Ω–æ—á–Ω–æ–π –≤–∏–¥', '–¥–Ω–µ–≤–Ω–æ–π –≤–∏–¥', '–≤–∏–¥ —Å–±–æ–∫—É', '–∏–Ω—Ç–µ—Ä—å–µ—Ä'];
                const imageType = imageTypes[index] || `–≤–∏–¥ ${index + 1}`;
              
                imagesHtml += `
                    <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('${imageSrc}', '${carModel.brand} ${carModel.name} ${equipment.name} - ${imageType}')">
                        <img src="${imageSrc}" alt="${carModel.brand} ${carModel.name} ${equipment.name} - ${imageType}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
                    </div>
                `;
            });
        } else {
            // –ó–∞–≥–ª—É—à–∫–∏ –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            const placeholderImages = [
                { color: 'black/yellow', text: 'Night', alt: '–Ω–æ—á–Ω–æ–π –≤–∏–¥' },
                { color: 'white/gray', text: 'Day', alt: '–¥–Ω–µ–≤–Ω–æ–π –≤–∏–¥' },
                { color: 'silver/black', text: 'Side', alt: '–≤–∏–¥ —Å–±–æ–∫—É' },
                { color: 'gray/white', text: 'Interior', alt: '–∏–Ω—Ç–µ—Ä—å–µ—Ä' }
            ];
            
            placeholderImages.forEach(img => {
                const placeholderUrl = `https://placehold.co/800x600/${img.color}?text=${carModel.brand}+${carModel.name}+${img.text}`;
                imagesHtml += `
                    <div class="aspect-[4/3] rounded-xl overflow-hidden shadow-md cursor-pointer" onclick="openImageModal('${placeholderUrl}', '${carModel.brand} ${carModel.name} - ${img.alt}')">
                        <img src="${placeholderUrl}" alt="${carModel.brand} ${carModel.name} - ${img.alt}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
                    </div>
                `;
            });
        }
      
        gallery.innerHTML = imagesHtml;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
    function updateSpecifications(equipment) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ—â–Ω–æ—Å—Ç—å
        const powerElement = document.getElementById('spec-power');
        if (powerElement && equipment.specs) {
            powerElement.textContent = `${equipment.specs.power} –ª.—Å.`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
        const maxSpeedElement = document.getElementById('spec-max-speed');
        if (maxSpeedElement && equipment.specs) {
            maxSpeedElement.textContent = `${equipment.specs.max_speed} –∫–º/—á`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–≥–æ–Ω
        const accelerationElement = document.getElementById('spec-acceleration');
        if (accelerationElement && equipment.specs) {
            accelerationElement.textContent = `${equipment.specs.acceleration} —Å`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞
        const fuelElement = document.getElementById('spec-fuel-mixed');
        if (fuelElement && equipment.specs) {
            fuelElement.textContent = `${equipment.specs.fuel_consumption} –ª/100 –∫–º`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–¥ –≤ –≥–æ—Ä–æ–¥–µ
        const fuelCityElement = document.getElementById('spec-fuel-city');
        if (fuelCityElement && equipment.specs) {
            const cityConsumption = (equipment.specs.fuel_consumption * 1.3).toFixed(1);
            fuelCityElement.textContent = `${cityConsumption} –ª/100 –∫–º`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–¥ –Ω–∞ —Ç—Ä–∞—Å—Å–µ
        const fuelHighwayElement = document.getElementById('spec-fuel-highway');
        if (fuelHighwayElement && equipment.specs) {
            const highwayConsumption = (equipment.specs.fuel_consumption * 0.8).toFixed(1);
            fuelHighwayElement.textContent = `${highwayConsumption} –ª/100 –∫–º`;
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
    function updateBaseEquipment(equipment) {
        if (!equipment.base_equipment) return;

        const baseEquip = equipment.base_equipment;

        // –ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å
        const climateElement = document.getElementById('spec-climate-control');
        if (climateElement) {
            climateElement.textContent = baseEquip.climate_control ? '–î–∞' : '–ù–µ—Ç';
        }

        // –ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
        const multimediaElement = document.getElementById('spec-multimedia');
        if (multimediaElement) {
            multimediaElement.textContent = baseEquip.multimedia_system || '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç';
        }

        // –ü–æ–¥–æ–≥—Ä–µ–≤ —Å–∏–¥–µ–Ω–∏–π
        const seatHeatingElement = document.getElementById('spec-seat-heating');
        if (seatHeatingElement) {
            seatHeatingElement.textContent = baseEquip.seat_heating || '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç';
        }

        // –ü–æ–¥–æ–≥—Ä–µ–≤ —Ä—É–ª—è
        const heatedWheelElement = document.getElementById('spec-heated-wheel');
        if (heatedWheelElement) {
            heatedWheelElement.textContent = baseEquip.heated_steering_wheel ? '–î–∞' : '–ù–µ—Ç';
        }

        // –ö–æ–∂–∞–Ω—ã–µ —Å–∏–¥–µ–Ω—å—è
        const leatherSeatsElement = document.getElementById('spec-leather-seats');
        if (leatherSeatsElement) {
            leatherSeatsElement.textContent = baseEquip.leather_seats ? '–î–∞' : '–ù–µ—Ç';
        }

        // –†–∞–∑–º–µ—Ä –¥–∏—Å–∫–æ–≤
        const wheelSizeElement = document.getElementById('spec-wheel-size');
        if (wheelSizeElement) {
            wheelSizeElement.textContent = baseEquip.wheel_size || 'R15';
        }

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
        const sunroofElement = document.getElementById('spec-sunroof');
        if (sunroofElement) {
            sunroofElement.textContent = baseEquip.sunroof ? '–î–∞' : '–ù–µ—Ç';
        }

        const navigationElement = document.getElementById('spec-navigation');
        if (navigationElement) {
            navigationElement.textContent = baseEquip.navigation ? '–î–∞' : '–ù–µ—Ç';
        }

        const parkingSensorsElement = document.getElementById('spec-parking-sensors');
        if (parkingSensorsElement) {
            parkingSensorsElement.textContent = baseEquip.parking_sensors ? '–î–∞' : '–ù–µ—Ç';
        }

        const rearCameraElement = document.getElementById('spec-rear-camera');
        if (rearCameraElement) {
            rearCameraElement.textContent = baseEquip.rear_camera ? '–î–∞' : '–ù–µ—Ç';
        }

        const cruiseControlElement = document.getElementById('spec-cruise-control');
        if (cruiseControlElement) {
            cruiseControlElement.textContent = baseEquip.cruise_control ? '–î–∞' : '–ù–µ—Ç';
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
    function updateEquipmentFeatures(equipment) {
        const featuresContainer = document.getElementById('spec-equipment-features');
        if (!featuresContainer) return;

        let featuresHtml = '';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏
        const hasFeatures = equipment.features && Object.keys(equipment.features).length > 0;
        
        if (hasFeatures) {
            featuresHtml = '<div class="space-y-4">';
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const categoryNames = {
                'safety': '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
                'comfort': '–ö–æ–º—Ñ–æ—Ä—Ç',
                'multimedia': '–ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞',
                'exterior': '–≠–∫—Å—Ç–µ—Ä—å–µ—Ä',
                'interior': '–ò–Ω—Ç–µ—Ä—å–µ—Ä',
                'other': '–î—Ä—É–≥–æ–µ'
            };

            Object.entries(equipment.features).forEach(([category, features]) => {
                if (features && features.length > 0) {
                    const categoryName = categoryNames[category] || category;
                    featuresHtml += `
                        <div class="mb-4">
                            <h5 class="font-semibold text-sm text-gray-700 mb-2 flex items-center gap-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                                ${categoryName}
                            </h5>
                            <div class="space-y-1 ml-4">
                    `;
                    
                    features.forEach(feature => {
                        featuresHtml += `
                            <div class="flex items-center gap-2">
                                <span class="text-green-500 text-sm">‚úì</span>
                                <span class="text-sm text-gray-600">${feature}</span>
                            </div>
                        `;
                    });
                    
                    featuresHtml += '</div></div>';
                }
            });
            
            featuresHtml += '</div>';
        } else {
            // –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
            featuresHtml = `
                <div class="text-center py-8 text-gray-500">
                    <span class="text-4xl mb-4 block">üìã</span>
                    <p class="text-lg font-medium mb-2">–ë–∞–∑–æ–≤–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è</p>
                    <p class="text-sm">–í–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏</p>
                </div>
            `;
        }
        
        featuresContainer.innerHTML = featuresHtml;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
    function selectEquipment(equipmentId) {
        // –ù–∞—Ö–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
        const equipment = equipmentsData.find(eq => eq.id === equipmentId);
        if (!equipment) return;

        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
        document.querySelectorAll('.equipment-btn').forEach(btn => {
            btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
            btn.classList.add('border-gray-300', 'hover:bg-gray-50', 'text-gray-700');
        });

        const activeBtn = document.querySelector(`[data-equipment-id="${equipmentId}"]`);
        if (activeBtn) {
            activeBtn.classList.add('bg-blue-600', 'text-white', 'border-blue-600');
            activeBtn.classList.remove('border-gray-300', 'hover:bg-gray-50', 'text-gray-700');
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
        const nameElement = document.getElementById('equipment-name');
        if (nameElement) {
            nameElement.textContent = equipment.name;
        }

        const descriptionElement = document.getElementById('equipment-description');
        if (descriptionElement) {
            descriptionElement.textContent = equipment.description;
        }

        const priceElement = document.getElementById('equipment-price');
        if (priceElement) {
            const formattedPrice = parseFloat(equipment.price).toLocaleString('ru-RU');
            priceElement.textContent = `${formattedPrice} ‚ÇΩ`;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
        updateSpecifications(equipment);

        // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–∑–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
        updateBaseEquipment(equipment);

        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        updateEquipmentFeatures(equipment);

        // –û–±–Ω–æ–≤–ª—è–µ–º –≥–∞–ª–µ—Ä–µ—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        updatePhotosGallery(equipment);

        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const titleElement = document.getElementById('car-title');
        if (titleElement) {
            titleElement.textContent = `${carModel.brand} ${carModel.name} ${equipment.name}`;
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π
        document.querySelectorAll('.equipment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const equipmentId = parseInt(this.getAttribute('data-equipment-id'));
                if (equipmentId) {
                    selectEquipment(equipmentId);
                }
            });
        });

        // –ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏, –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        if (equipmentsData && equipmentsData.length > 0) {
            selectEquipment(equipmentsData[0].id);
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });
    });
</script>

{% endblock %}